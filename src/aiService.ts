import { Message } from "./types";

// @ts-ignore - env variable is defined in vite.config.ts
const ANTHROPIC_API_KEY = import.meta.env.VITE_ANTHROPIC_API_KEY as string;

// System prompt –¥–ª—è AI-—Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä–∞
const getSystemPrompt = (subject: string, grade?: number) => {
  const basePrompt = `–¢—ã - AI-—Ä–µ–ø–µ—Ç–∏—Ç–æ—Ä –ø–æ –ø—Ä–µ–¥–º–µ—Ç—É "${subject}" –¥–ª—è —Ä–æ—Å—Å–∏–π—Å–∫–∏—Ö —à–∫–æ–ª—å–Ω–∏–∫–æ–≤.

–¢–í–û–Ø –†–û–õ–¨:
- –ü–æ–º–æ–≥–∞–π —É—á–µ–Ω–∏–∫—É –ø–æ–Ω—è—Ç—å –º–∞—Ç–µ—Ä–∏–∞–ª, –ù–ï –¥–µ–ª–∞–π –∑–∞ –Ω–µ–≥–æ
- –ò—Å–ø–æ–ª—å–∑—É–π —Å–æ–∫—Ä–∞—Ç–æ–≤—Å–∫–∏–π –º–µ—Ç–æ–¥: –∑–∞–¥–∞–≤–∞–π –Ω–∞–≤–æ–¥—è—â–∏–µ –≤–æ–ø—Ä–æ—Å—ã
- –ê–¥–∞–ø—Ç–∏—Ä—É–π –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –ø–æ–¥ –≤–æ–∑—Ä–∞—Å—Ç —É—á–µ–Ω–∏–∫–∞
- –ë—É–¥—å –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–º –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–º
- –•–≤–∞–ª–∏ –∑–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã, –º–æ—Ç–∏–≤–∏—Ä—É–π –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

–í–ê–ñ–ù–û:
- –ï—Å–ª–∏ —É—á–µ–Ω–∏–∫ –ø—Ä–æ—Å–∏—Ç —Ä–µ—à–∏—Ç—å –∑–∞–¥–∞—á—É - –ù–ï –¥–∞–≤–∞–π –≥–æ—Ç–æ–≤–æ–µ —Ä–µ—à–µ–Ω–∏–µ
- –í–µ–¥–∏ –∫ —Ä–µ—à–µ–Ω–∏—é —á–µ—Ä–µ–∑ –≤–æ–ø—Ä–æ—Å—ã: "–ß—Ç–æ –Ω–∞–º –¥–∞–Ω–æ?", "–ö–∞–∫—É—é —Ñ–æ—Ä–º—É–ª—É –ø—Ä–∏–º–µ–Ω–∏–º?"
- –ï—Å–ª–∏ —É—á–µ–Ω–∏–∫ —Å–æ–≤—Å–µ–º –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç - —É–ø—Ä–æ—Å—Ç–∏ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ
- –ò—Å–ø–æ–ª—å–∑—É–π –ø—Ä–∏–º–µ—Ä—ã –∏–∑ –∂–∏–∑–Ω–∏ –¥–ª—è –ª—É—á—à–µ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è
- –û—Ç–≤–µ—á–∞–π –Ω–∞ —Ä—É—Å—Å–∫–æ–º —è–∑—ã–∫–µ (–∫—Ä–æ–º–µ –ø—Ä–∏–º–µ—Ä–æ–≤ –Ω–∞ –∏–Ω–æ—Å—Ç—Ä–∞–Ω–Ω—ã—Ö —è–∑—ã–∫–∞—Ö)

–ù–ò–ö–û–ì–î–ê:
- –ù–µ –¥–∞–≤–∞–π –ø—Ä—è–º—ã–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ –¥–æ–º–∞—à–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è
- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–π —Å–ª–æ–∂–Ω—ã–µ —Ç–µ—Ä–º–∏–Ω—ã –±–µ–∑ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è
- –ù–µ –±—É–¥—å —Å–ª–∏—à–∫–æ–º —Ñ–æ—Ä–º–∞–ª—å–Ω—ã–º - –æ–±—â–∞–π—Å—è –∫–∞–∫ –¥—Ä—É–≥

–ü–†–ï–î–ú–ï–¢–´ –ò –û–°–û–ë–ï–ù–ù–û–°–¢–ò:
${getSubjectInstructions(subject)}`;

  return basePrompt;
};

const getSubjectInstructions = (subject: string): string => {
  const instructions: Record<string, string> = {
    '–ê–ª–≥–µ–±—Ä–∞': `–ê–õ–ì–ï–ë–†–ê:
- –í—Å–µ–≥–¥–∞ –ø–æ–∫–∞–∑—ã–≤–∞–π —Ä–µ—à–µ–Ω–∏–µ –ø–æ—à–∞–≥–æ–≤–æ
- –û–±—ä—è—Å–Ω—è–π –∫–∞–∂–¥—ã–π —à–∞–≥ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–π
- –ò—Å–ø–æ–ª—å–∑—É–π –ø—Ä–∏–º–µ—Ä—ã —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º–∏ —á–∏—Å–ª–∞–º–∏
- –ü–æ–º–æ–≥–∞–π —Å —É—Ä–∞–≤–Ω–µ–Ω–∏—è–º–∏, –Ω–µ—Ä–∞–≤–µ–Ω—Å—Ç–≤–∞–º–∏, —Ñ—É–Ω–∫—Ü–∏—è–º–∏`,

    '–ì–µ–æ–º–µ—Ç—Ä–∏—è': `–ì–ï–û–ú–ï–¢–†–ò–Ø:
- –û–ø–∏—Å—ã–≤–∞–π –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –∏ —á–µ—Ä—Ç–µ–∂–∏ —Å–ª–æ–≤–∞–º–∏
- –û–±—ä—è—Å–Ω—è–π —Ç–µ–æ—Ä–µ–º—ã –Ω–∞ –ø—Ä–∏–º–µ—Ä–∞—Ö
- –ò—Å–ø–æ–ª—å–∑—É–π —Å–≤–æ–π—Å—Ç–≤–∞ —Ñ–∏–≥—É—Ä
- –ü–æ–º–æ–≥–∞–π —Å –∑–∞–¥–∞—á–∞–º–∏ –Ω–∞ –ø–ª–æ—â–∞–¥—å, –æ–±—ä—ë–º, —É–≥–ª—ã`,

    '–†—É—Å—Å–∫–∏–π': `–†–£–°–°–ö–ò–ô –Ø–ó–´–ö:
- –û–±—ä—è—Å–Ω—è–π –ø—Ä–∞–≤–∏–ª–∞ –ø—Ä–æ—Å—Ç—ã–º —è–∑—ã–∫–æ–º
- –ü—Ä–∏–≤–æ–¥–∏ –ø—Ä–∏–º–µ—Ä—ã –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π
- –ü–æ–º–æ–≥–∞–π –∑–∞–ø–æ–º–Ω–∏—Ç—å —á–µ—Ä–µ–∑ –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–∏
- –ü—Ä–æ–≤–µ—Ä—è–π –≥—Ä–∞–º–º–∞—Ç–∏–∫—É –∏ –ø—É–Ω–∫—Ç—É–∞—Ü–∏—é`,

    '–ê–Ω–≥–ª–∏–π—Å–∫–∏–π': `–ê–ù–ì–õ–ò–ô–°–ö–ò–ô –Ø–ó–´–ö:
- –û–±—ä—è—Å–Ω—è–π –≥—Ä–∞–º–º–∞—Ç–∏–∫—É —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
- –ü–æ–º–æ–≥–∞–π —Å –ø—Ä–æ–∏–∑–Ω–æ—à–µ–Ω–∏–µ–º (–¥–∞–≤–∞–π —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—é)
- –ò—Å–ø–æ–ª—å–∑—É–π –ø—Ä–æ—Å—Ç—É—é –ª–µ–∫—Å–∏–∫—É –¥–ª—è –æ–±—ä—è—Å–Ω–µ–Ω–∏–π
- –ü–æ–æ—â—Ä—è–π –ø–æ–ø—ã—Ç–∫–∏ –≥–æ–≤–æ—Ä–∏—Ç—å –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º`,

    '–§–∏–∑–∏–∫–∞': `–§–ò–ó–ò–ö–ê:
- –û–±—ä—è—Å–Ω—è–π —Ñ–∏–∑–∏—á–µ—Å–∫–∏–µ —è–≤–ª–µ–Ω–∏—è –Ω–∞ –ø—Ä–∏–º–µ—Ä–∞—Ö –∏–∑ –∂–∏–∑–Ω–∏
- –ò—Å–ø–æ–ª—å–∑—É–π –∞–Ω–∞–ª–æ–≥–∏–∏ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∫–æ–Ω—Ü–µ–ø—Ü–∏–π
- –ü–æ–º–æ–≥–∞–π —Å —Ñ–æ—Ä–º—É–ª–∞–º–∏ –∏ —Ä–∞—Å—á—ë—Ç–∞–º–∏
- –°–≤—è–∑—ã–≤–∞–π —Ç–µ–æ—Ä–∏—é —Å –ø—Ä–∞–∫—Ç–∏–∫–æ–π`,

    '–•–∏–º–∏—è': `–•–ò–ú–ò–Ø:
- –û–±—ä—è—Å–Ω—è–π —Ä–µ–∞–∫—Ü–∏–∏ –∏ –ø—Ä–æ—Ü–µ—Å—Å—ã –ø–æ–Ω—è—Ç–Ω—ã–º —è–∑—ã–∫–æ–º
- –ò—Å–ø–æ–ª—å–∑—É–π –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –æ–ø–∏—Å–∞–Ω–∏—è –º–æ–ª–µ–∫—É–ª
- –ü–æ–º–æ–≥–∞–π —Å —Ö–∏–º–∏—á–µ—Å–∫–∏–º–∏ —É—Ä–∞–≤–Ω–µ–Ω–∏—è–º–∏
- –ü–æ–¥—á—ë—Ä–∫–∏–≤–∞–π –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ`,

    '–ë–∏–æ–ª–æ–≥–∏—è': `–ë–ò–û–õ–û–ì–ò–Ø:
- –û–±—ä—è—Å–Ω—è–π –±–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –ø—Ä–æ—Å—Ç—ã–º —è–∑—ã–∫–æ–º
- –ò—Å–ø–æ–ª—å–∑—É–π –ø—Ä–∏–º–µ—Ä—ã –∏–∑ –ø—Ä–∏—Ä–æ–¥—ã –∏ –∂–∏–∑–Ω–∏
- –ü–æ–º–æ–≥–∞–π —Å —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏–µ–π
- –°–≤—è–∑—ã–≤–∞–π —Å –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–º–∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏`,

    '–ò—Å—Ç–æ—Ä–∏—è': `–ò–°–¢–û–†–ò–Ø:
- –†–∞—Å—Å–∫–∞–∑—ã–≤–∞–π —Å–æ–±—ã—Ç–∏—è –∫–∞–∫ –∏—Å—Ç–æ—Ä–∏–∏
- –û–±—ä—è—Å–Ω—è–π –ø—Ä–∏—á–∏–Ω–Ω–æ-—Å–ª–µ–¥—Å—Ç–≤–µ–Ω–Ω—ã–µ —Å–≤—è–∑–∏
- –ü–æ–º–æ–≥–∞–π –∑–∞–ø–æ–º–∏–Ω–∞—Ç—å –¥–∞—Ç—ã —á–µ—Ä–µ–∑ –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–∏
- –°–≤—è–∑—ã–≤–∞–π –ø—Ä–æ—à–ª–æ–µ —Å –Ω–∞—Å—Ç–æ—è—â–∏–º`,

    '–õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞': `–õ–ò–¢–ï–†–ê–¢–£–†–ê:
- –ü–æ–º–æ–≥–∞–π –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è
- –û–±—ä—è—Å–Ω—è–π –æ–±—Ä–∞–∑—ã –∏ —Å–∏–º–≤–æ–ª—ã
- –£—á–∏ –ø–∏—Å–∞—Ç—å —Å–æ—á–∏–Ω–µ–Ω–∏—è
- –û–±—Å—É–∂–¥–∞–π —Ç–µ–º—ã –∏ –∏–¥–µ–∏ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–π`,

    '–§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π': `–§–†–ê–ù–¶–£–ó–°–ö–ò–ô –Ø–ó–´–ö:
- –û–±—ä—è—Å–Ω—è–π –≥—Ä–∞–º–º–∞—Ç–∏–∫—É —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏
- –ü–æ–º–æ–≥–∞–π —Å –ø—Ä–æ–∏–∑–Ω–æ—à–µ–Ω–∏–µ–º
- –ò—Å–ø–æ–ª—å–∑—É–π –ø—Ä–æ—Å—Ç—ã–µ —Ñ—Ä–∞–∑—ã
- –ü–æ–æ—â—Ä—è–π –ø—Ä–∞–∫—Ç–∏–∫—É —è–∑—ã–∫–∞`
  };

  return instructions[subject] || '–û–±—ä—è—Å–Ω—è–π –º–∞—Ç–µ—Ä–∏–∞–ª –ø—Ä–æ—Å—Ç—ã–º –∏ –ø–æ–Ω—è—Ç–Ω—ã–º —è–∑—ã–∫–æ–º.';
};

// –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –≤ —Ñ–æ—Ä–º–∞—Ç Anthropic
const convertToAnthropicMessages = (messages: Message[]) => {
  return messages.map(msg => ({
    role: msg.role === 'user' ? 'user' : 'assistant',
    content: msg.text
  }));
};

export const getTutorResponse = async (
  history: Message[], 
  subject?: string
): Promise<string> => {
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ API –∫–ª—é—á–∞
  if (!ANTHROPIC_API_KEY || ANTHROPIC_API_KEY === 'PLACEHOLDER_API_KEY') {
    // Fallback –Ω–∞ –¥–µ–º–æ-–æ—Ç–≤–µ—Ç—ã
    return getDemoResponse(subject);
  }

  try {
    const response = await fetch('https://api.anthropic.com/v1/messages', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'x-api-key': ANTHROPIC_API_KEY,
        'anthropic-version': '2023-06-01',
        'anthropic-dangerous-direct-browser-access': 'true'
      },
      body: JSON.stringify({
        model: 'claude-sonnet-4-20250514',
        max_tokens: 1024,
        system: getSystemPrompt(subject || '–û–±—â–∏–µ –∑–Ω–∞–Ω–∏—è'),
        messages: convertToAnthropicMessages(history)
      })
    });

    if (!response.ok) {
      const error = await response.json();
      console.error('Anthropic API error:', error);
      throw new Error(error.error?.message || 'API request failed');
    }

    const data = await response.json();
    return data.content[0].text;
    
  } catch (error) {
    console.error('Error calling Claude API:', error);
    // Fallback –Ω–∞ –¥–µ–º–æ –ø—Ä–∏ –æ—à–∏–±–∫–µ
    return getDemoResponse(subject) + '\n\n_‚ö†Ô∏è –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–∫–∞–∑–∞–Ω –¥–µ–º–æ-–æ—Ç–≤–µ—Ç._';
  }
};

// –î–µ–º–æ-–æ—Ç–≤–µ—Ç—ã –¥–ª—è fallback
const DEMO_RESPONSES: Record<string, string[]> = {
  '–ê–ª–≥–µ–±—Ä–∞': [
    '–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å –ø–æ –∞–ª–≥–µ–±—Ä–µ! –î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º —ç—Ç–æ —É—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ—à–∞–≥–æ–≤–æ. ‚ûï',
    '–•–æ—Ä–æ—à–æ! –î–ª—è —Ä–µ—à–µ–Ω–∏—è —ç—Ç–æ–π –∑–∞–¥–∞—á–∏ –ø—Ä–∏–º–µ–Ω–∏–º –∞–ª–≥–µ–±—Ä–∞–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è.',
    '–î–∞–≤–∞–π –ø–æ–¥—É–º–∞–µ–º! –ö–∞–∫–∏–µ —Å–≤–æ–π—Å—Ç–≤–∞ —Å—Ç–µ–ø–µ–Ω–µ–π/–∫–æ—Ä–Ω–µ–π –∑–¥–µ—Å—å –ø—Ä–∏–º–µ–Ω–∏–º—ã? ü§î'
  ],
  '–ì–µ–æ–º–µ—Ç—Ä–∏—è': [
    '–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å –ø–æ –≥–µ–æ–º–µ—Ç—Ä–∏–∏! –î–∞–≤–∞–π –ø–æ—Å—Ç—Ä–æ–∏–º —á–µ—Ä—Ç—ë–∂. üìê',
    '–•–æ—Ä–æ—à–æ! –ö–∞–∫–∏–µ —Ç–µ–æ—Ä–µ–º—ã –∑–¥–µ—Å—å –º–æ–∂–Ω–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å?',
    '–î–ª—è —Ä–µ—à–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ–º —Ç–µ–æ—Ä–µ–º—É –ü–∏—Ñ–∞–≥–æ—Ä–∞ / –ø–æ–¥–æ–±–∏–µ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤. üî∫'
  ],
  '–†—É—Å—Å–∫–∏–π': [
    '–•–æ—Ä–æ—à–∏–π –≤–æ–ø—Ä–æ—Å! –≠—Ç–æ –ø—Ä–∞–≤–∏–ª–æ –ª–µ–≥–∫–æ –∑–∞–ø–æ–º–Ω–∏—Ç—å. –î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º –ø—Ä–∏–º–µ—Ä—ã. üìñ',
    '–û—Ç–ª–∏—á–Ω–æ! –ü–æ–ø—Ä–æ–±—É–µ–º —Ä–∞–∑–æ–±—Ä–∞—Ç—å —ç—Ç–æ –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö.',
    '–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –≠—Ç—É —Ç–µ–º—É –ª–µ–≥–∫–æ –ø–æ–Ω—è—Ç—å, –µ—Å–ª–∏ –∑–Ω–∞—Ç—å –æ–¥–∏–Ω —Å–µ–∫—Ä–µ—Ç...'
  ],
  '–ê–Ω–≥–ª–∏–π—Å–∫–∏–π': [
    'Great question! Let me explain this in a simple way... üá¨üáß',
    'Good! –î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º —ç—Ç–æ –ø—Ä–∞–≤–∏–ª–æ –Ω–∞ –ø—Ä–∏–º–µ—Ä–∞—Ö.',
    'Excellent! This is an important topic. Let\'s practice together!'
  ],
  '–§–∏–∑–∏–∫–∞': [
    '–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å –ø–æ —Ñ–∏–∑–∏–∫–µ! –î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º —ç—Ç–æ —è–≤–ª–µ–Ω–∏–µ. ‚ö°',
    '–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ! –ö–∞–∫–∏–µ –∑–∞–∫–æ–Ω—ã —Ñ–∏–∑–∏–∫–∏ –∑–¥–µ—Å—å –ø—Ä–∏–º–µ–Ω–∏–º—ã?',
    '–î–∞–≤–∞–π –ø–æ–¥—É–º–∞–µ–º, –∫–∞–∫–∏–µ —Å–∏–ª—ã –¥–µ–π—Å—Ç–≤—É—é—Ç –≤ —ç—Ç–æ–π –∑–∞–¥–∞—á–µ? üî¨'
  ],
  '–•–∏–º–∏—è': [
    '–•–æ—Ä–æ—à–∏–π –≤–æ–ø—Ä–æ—Å! –î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º —ç—Ç—É —Ä–µ–∞–∫—Ü–∏—é. üß™',
    '–û—Ç–ª–∏—á–Ω–æ! –ö–∞–∫–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã —É—á–∞—Å—Ç–≤—É—é—Ç? –°–æ—Å—Ç–∞–≤–∏–º —É—Ä–∞–≤–Ω–µ–Ω–∏–µ!',
    '–ò–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è –∑–∞–¥–∞—á–∞! –í—Å–ø–æ–º–Ω–∏–º —Ç–∞–±–ª–∏—Ü—É –ú–µ–Ω–¥–µ–ª–µ–µ–≤–∞...'
  ],
  '–ë–∏–æ–ª–æ–≥–∏—è': [
    '–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å –ø–æ –±–∏–æ–ª–æ–≥–∏–∏! –î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º—Å—è. üß¨',
    '–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ! –≠—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å –∫–ª–µ—Ç–æ—á–Ω—ã–º —Å—Ç—Ä–æ–µ–Ω–∏–µ–º...',
    '–•–æ—Ä–æ—à–∏–π –≤–æ–ø—Ä–æ—Å! –†–∞—Å—Å–º–æ—Ç—Ä–∏–º —ç—Ç–æ —è–≤–ª–µ–Ω–∏–µ –ø–æ–¥—Ä–æ–±–Ω–µ–µ.'
  ],
  '–ò—Å—Ç–æ—Ä–∏—è': [
    '–ò–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –î–∞–≤–∞–π –≤—Å–ø–æ–º–Ω–∏–º —ç—Ç–æ—Ç –ø–µ—Ä–∏–æ–¥. üèõÔ∏è',
    '–•–æ—Ä–æ—à–∏–π –≤–æ–ø—Ä–æ—Å! –ö–∞–∫–∏–µ —Å–æ–±—ã—Ç–∏—è —ç—Ç–æ–º—É –ø—Ä–µ–¥—à–µ—Å—Ç–≤–æ–≤–∞–ª–∏?',
    '–û—Ç–ª–∏—á–Ω–æ! –†–∞—Å—Å–º–æ—Ç—Ä–∏–º –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç...'
  ],
  '–õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞': [
    '–•–æ—Ä–æ—à–∏–π –≤–æ–ø—Ä–æ—Å! –î–∞–≤–∞–π –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º —ç—Ç–æ –ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ. üìö',
    '–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ! –ß—Ç–æ –∞–≤—Ç–æ—Ä —Ö–æ—Ç–µ–ª —Å–∫–∞–∑–∞—Ç—å —ç—Ç–∏–º?',
    '–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –†–∞—Å—Å–º–æ—Ç—Ä–∏–º –æ–±—Ä–∞–∑ –≥–ª–∞–≤–Ω–æ–≥–æ –≥–µ—Ä–æ—è...'
  ],
  '–§—Ä–∞–Ω—Ü—É–∑—Å–∫–∏–π': [
    'Tr√®s bien! –î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º —ç—Ç–æ –ø—Ä–∞–≤–∏–ª–æ. üá´üá∑',
    'Bon! –ü–æ–ø—Ä–æ–±—É–µ–º –Ω–∞ –ø—Ä–∏–º–µ—Ä–∞—Ö...',
    'Excellent! –≠—Ç–æ –≤–∞–∂–Ω–∞—è —Ç–µ–º–∞ –≤ –≥—Ä–∞–º–º–∞—Ç–∏–∫–µ!'
  ]
};

const DEFAULT_RESPONSES = [
  '–û—Ç–ª–∏—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å! –î–∞–≤–∞–π —Ä–∞–∑–±–µ—Ä—ë–º—Å—è –≤–º–µ—Å—Ç–µ. üòä',
  '–•–æ—Ä–æ—à–æ! –≠—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è —Ç–µ–º–∞. –ù–∞—á–Ω—ë–º —Å –æ—Å–Ω–æ–≤.',
  '–ü–æ–Ω—è–ª! –°–µ–π—á–∞—Å –æ–±—ä—è—Å–Ω—é –ø—Ä–æ—Å—Ç—ã–º —è–∑—ã–∫–æ–º. ‚ú®'
];

const getDemoResponse = (subject?: string): string => {
  const responses = subject && DEMO_RESPONSES[subject] 
    ? DEMO_RESPONSES[subject] 
    : DEFAULT_RESPONSES;
  
  const randomIndex = Math.floor(Math.random() * responses.length);
  return responses[randomIndex] + '\n\n_üí° –≠—Ç–æ –¥–µ–º–æ-–≤–µ—Ä—Å–∏—è. –î–æ–±–∞–≤—å—Ç–µ API –∫–ª—é—á –¥–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã._';
};
